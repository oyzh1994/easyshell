<?xml version="1.0" encoding="UTF-8"?>
<?import cn.oyzh.easyshell.fx.db.DBDataDateTextFiled?>
<?import cn.oyzh.easyshell.fx.db.DBDataFieldSeparatorComboBox?>
<?import cn.oyzh.easyshell.fx.mysql.data.ShellMysqlDataImportFileTableView?>
<?import cn.oyzh.easyshell.fx.db.DBDataRecordLabelComboBox?>
<?import cn.oyzh.easyshell.fx.db.DBDataRecordSeparatorComboBox?>
<?import cn.oyzh.easyshell.fx.db.DBDataTxtIdentifierComboBox?>
<?import cn.oyzh.fx.plus.controls.box.FXHBox?>
<?import cn.oyzh.fx.plus.controls.box.FXVBox?>
<?import cn.oyzh.fx.plus.controls.button.FXButton?>
<?import cn.oyzh.fx.plus.controls.button.FXCheckBox?>
<?import cn.oyzh.fx.plus.controls.button.FXRadioButton?>
<?import cn.oyzh.fx.plus.controls.table.FXTableColumn?>
<?import cn.oyzh.fx.plus.controls.toggle.FXToggleGroup?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import cn.oyzh.fx.plus.controls.label.FXLabel?>
<?import cn.oyzh.fx.gui.button.NextStepButton?>
<?import cn.oyzh.fx.gui.button.CancelButton?>
<?import cn.oyzh.fx.gui.button.PrevStepButton?>
<?import cn.oyzh.fx.gui.text.field.NumberTextField?>
<?import cn.oyzh.fx.plus.controls.label.FXLabel?>
<?import cn.oyzh.fx.gui.text.area.MsgTextArea?>
<?import cn.oyzh.fx.gui.button.ImportButton?>
<?import cn.oyzh.fx.gui.button.StopButton?>
<?import cn.oyzh.fx.gui.label.InfoLabel?>
<FXVBox xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="cn.oyzh.easyshell.controller.mysql.data.ShellMysqlDataImportController" realWidth="700"
        realHeight="650">
    <FXVBox fx:id="step1" flexHeight="100%" flexWidth="100%" managedBindVisible="true">
        <InfoLabel text="%shell.mysql.import.tip1">
            <VBox.margin>
                <Insets left="30" top="10"/>
            </VBox.margin>
        </InfoLabel>
        <FXVBox flexHeight="100% - 100" flexWidth="100%">
            <fx:define>
                <FXToggleGroup fx:id="fileType"/>
            </fx:define>
            <FXRadioButton toggleGroup="$fileType" text="%base.jsonType" userData="json">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton toggleGroup="$fileType" text="%base.xmlType" userData="xml">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton toggleGroup="$fileType" text="%base.csvType" userData="csv">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton toggleGroup="$fileType" text="%base.excelType" userData="excel">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton toggleGroup="$fileType" text="%base.txtType" userData="txt">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
        </FXVBox>
        <FXHBox flexWidth="100%">
            <NextStepButton onAction="#showStep2" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="15"/>
                </HBox.margin>
            </NextStepButton>
            <CancelButton iconSizePercent="0.6" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </CancelButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step2" flexHeight="100%" flexWidth="100%" managed="false" visible="false" managedBindVisible="true">
        <InfoLabel text="%shell.mysql.import.tip2">
            <VBox.margin>
                <Insets left="30" top="10"/>
            </VBox.margin>
        </InfoLabel>
        <FXVBox flexHeight="100% - 100" flexWidth="100%">
            <ShellMysqlDataImportFileTableView fx:id="importFileTableView" flexHeight="100% - 60" flexWidth="100% - 40">
                <columns>
                    <FXTableColumn flexWidth="70% -15" valueName="filePathControl" text="%base.filePath"
                                   resizable="true"/>
                    <FXTableColumn flexWidth="30%" valueName="targetTableControl" text="%base.tableName"
                                   resizable="true"/>
                </columns>
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </ShellMysqlDataImportFileTableView>
            <FXHBox flexWidth="100%" realHeight="50">
                <FXButton text="%base.add" onAction="#addFile" realHeight="30">
                    <HBox.margin>
                        <Insets left="30" top="10"/>
                    </HBox.margin>
                </FXButton>
                <FXButton text="%base.delete" onAction="#deleteFile" realHeight="30">
                    <HBox.margin>
                        <Insets left="15" top="10"/>
                    </HBox.margin>
                </FXButton>
            </FXHBox>
        </FXVBox>
        <FXHBox flexWidth="100%">
            <PrevStepButton onAction="#showStep1" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="15"/>
                </HBox.margin>
            </PrevStepButton>
            <NextStepButton onAction="#showStep3" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </NextStepButton>
            <CancelButton iconSizePercent="0.6" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </CancelButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step3" flexHeight="100%" flexWidth="100%" managed="false" visible="false" managedBindVisible="true">
        <InfoLabel text="%shell.mysql.import.tip3">
            <VBox.margin>
                <Insets left="30" top="10"/>
            </VBox.margin>
        </InfoLabel>
        <FXVBox flexHeight="100% - 100" flexWidth="100%">
            <FXCheckBox fx:id="attrToColumn" text="%shell.mysql.import.tip7" managed="false" visible="false"
                        groupId="attrToColumn">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXCheckBox>
            <InfoLabel text="%shell.mysql.import.tip10" managed="false" visible="false" groupId="recordLabel">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <DBDataRecordLabelComboBox flexWidth="100% - 140" realHeight="30" initIndex="0" fx:id="recordLabel"
                                       managed="false" visible="false"
                                       groupId="recordLabel">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </DBDataRecordLabelComboBox>
            <InfoLabel text="%shell.mysql.import.tip8" managed="false" visible="false" groupId="columnIndex">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <NumberTextField flexWidth="100% - 140" realHeight="30" min="1" value="1" managed="false" visible="false"
                             fx:id="columnIndex"
                             groupId="columnIndex">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </NumberTextField>
            <InfoLabel text="%shell.mysql.import.tip9" managed="false" visible="false" groupId="dataStartIndex">
                <VBox.margin>
                    <Insets left="30" top="15"/>
                </VBox.margin>
            </InfoLabel>
            <NumberTextField flexWidth="100% - 140" realHeight="30" min="1" value="2" fx:id="dataStartIndex"
                             managed="false" visible="false"
                             groupId="dataStartIndex">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </NumberTextField>
            <InfoLabel text="%base.recordSeparator" managed="false" visible="false" groupId="recordSeparator">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <DBDataRecordSeparatorComboBox flexWidth="100% - 140" realHeight="30" fx:id="recordSeparator" managed="false"
                                           visible="false"
                                           groupId="recordSeparator">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </DBDataRecordSeparatorComboBox>
            <InfoLabel text="%base.fieldSeparator" managed="false" visible="false" groupId="fieldSeparator">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <DBDataFieldSeparatorComboBox initIndex="0" flexWidth="100% - 140" realHeight="30" managed="false"
                                          visible="false"
                                          fx:id="fieldSeparator"
                                          groupId="fieldSeparator">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </DBDataFieldSeparatorComboBox>
            <InfoLabel text="%base.txtIdentifier" managed="false" visible="false" groupId="txtIdentifier">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <DBDataTxtIdentifierComboBox initIndex="0" flexWidth="100% - 140" realHeight="30" managed="false"
                                         visible="false"
                                         fx:id="txtIdentifier"
                                         groupId="txtIdentifier">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </DBDataTxtIdentifierComboBox>
            <InfoLabel text="%base.dateFormat">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <FXHBox realHeight="30" flexWidth="100%">
                <DBDataDateTextFiled flexWidth="100% - 320" realHeight="30" promptText="%shell.mysql.export.tip9"
                                     text="yyyy-MM-dd HH:mm:ss" fx:id="dateFormat">
                    <HBox.margin>
                        <Insets left="30" top="5"/>
                    </HBox.margin>
                </DBDataDateTextFiled>
                <FXLabel fx:id="datePreview">
                    <HBox.margin>
                        <Insets left="10" top="10"/>
                    </HBox.margin>
                </FXLabel>
            </FXHBox>
        </FXVBox>
        <FXHBox flexWidth="100%">
            <PrevStepButton onAction="#showStep2" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="15"/>
                </HBox.margin>
            </PrevStepButton>
            <NextStepButton onAction="#showStep4" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </NextStepButton>
            <CancelButton iconSizePercent="0.6" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </CancelButton>
        </FXHBox>
    </FXVBox>
    <!-- <FXVBox fx:id="step4" flexHeight="100%" flexWidth="100%" managed="false" visible="false"> -->
    <!--     <InfoLabel text="%shell.mysql.import.tip4"> -->
    <!--         <VBox.margin> -->
    <!--             <Insets left="30" top="10"/> -->
    <!--         </VBox.margin> -->
    <!--     </InfoLabel> -->
    <!--     <FXVBox flexHeight="100% - 100" flexWidth="100%"> -->
    <!--         <FXHBox> -->
    <!--             <FXLabel text="%base.source" realHeight="30"> -->
    <!--                 <HBox.margin> -->
    <!--                     <Insets left="30" top="10"/> -->
    <!--                 </HBox.margin> -->
    <!--             </FXLabel> -->
    <!--             <DataImportTableComboBox realHeight="30" flexWidth="100% - 140" fx:id="sourceTableCombobox"> -->
    <!--                 <HBox.margin> -->
    <!--                     <Insets left="15" top="10"/> -->
    <!--                 </HBox.margin> -->
    <!--             </DataImportTableComboBox> -->
    <!--         </FXHBox> -->
    <!--         <FXHBox> -->
    <!--             <FXLabel text="%base.target" realHeight="30"> -->
    <!--                 <HBox.margin> -->
    <!--                     <Insets left="30" top="10"/> -->
    <!--                 </HBox.margin> -->
    <!--             </FXLabel> -->
    <!--             <ShellMysqlTableComboBox realHeight="30" flexWidth="100% - 140" fx:id="targetTableCombobox"> -->
    <!--                 <HBox.margin> -->
    <!--                     <Insets left="15" top="10"/> -->
    <!--                 </HBox.margin> -->
    <!--             </ShellMysqlTableComboBox> -->
    <!--         </FXHBox> -->
    <!--     </FXVBox> -->
    <!--     <FXHBox flexWidth="100%"> -->
    <!--         <PrevStepButton onAction="#showStep3" realHeight="30" iconSizePercent="0.75"> -->
    <!--             <HBox.margin> -->
    <!--                 <Insets left="30" top="15"/> -->
    <!--             </HBox.margin> -->
    <!--         </PrevStepButton> -->
    <!--         <NextStepButton onAction="#showStep5" realHeight="30" iconSizePercent="0.75"> -->
    <!--             <HBox.margin> -->
    <!--                 <Insets left="15" top="15"/> -->
    <!--             </HBox.margin> -->
    <!--         </NextStepButton> -->
    <!--     </FXHBox> -->
    <!-- </FXVBox> -->
    <FXVBox fx:id="step4" flexHeight="100%" flexWidth="100%" managed="false" visible="false" managedBindVisible="true">
        <InfoLabel text="%shell.mysql.import.tip5">
            <VBox.margin>
                <Insets left="30" top="10"/>
            </VBox.margin>
        </InfoLabel>
        <FXVBox flexWidth="100%" flexHeight="100% - 100">
            <fx:define>
                <FXToggleGroup fx:id="importMode"/>
            </fx:define>
            <FXRadioButton toggleGroup="$importMode" text="%shell.mysql.import.tip11" selected="true" userData="1">
                <VBox.margin>
                    <Insets left="30" top="15"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton toggleGroup="$importMode" text="%shell.mysql.import.tip12" userData="2">
                <VBox.margin>
                    <Insets left="30" top="15"/>
                </VBox.margin>
            </FXRadioButton>
        </FXVBox>
        <FXHBox flexWidth="100%">
            <PrevStepButton onAction="#showStep3" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="15"/>
                </HBox.margin>
            </PrevStepButton>
            <NextStepButton onAction="#showStep5" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </NextStepButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step5" flexHeight="100%" flexWidth="100%" managed="false" visible="false" managedBindVisible="true">
        <InfoLabel text="%shell.mysql.import.tip6">
            <VBox.margin>
                <Insets left="30" top="10"/>
            </VBox.margin>
        </InfoLabel>
        <FXVBox flexWidth="100%" flexHeight="100% - 100">
            <MsgTextArea lineLimit="300" fx:id="importMsg" flexWidth="100% - 80" flexHeight="100% - 50">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </MsgTextArea>
            <FXLabel fx:id="importStatus" realHeight="30">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </FXLabel>
        </FXVBox>
        <FXHBox flexWidth="100%">
            <PrevStepButton onAction="#showStep4" groupId="exec" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="15"/>
                </HBox.margin>
            </PrevStepButton>
            <ImportButton tipText="%base.start" groupId="exec" onAction="#doImport" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </ImportButton>
            <StopButton disable="true" fx:id="stopImportBtn" onAction="#stopImport" realHeight="30"
                        iconSizePercent="0.9">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </StopButton>
            <CancelButton iconSizePercent="0.6" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="15"/>
                </HBox.margin>
            </CancelButton>
        </FXHBox>
    </FXVBox>
</FXVBox>
