<?xml version="1.0" encoding="UTF-8"?>
<?import cn.oyzh.easyshell.fx.redis.ShellRedisDatabaseComboBox?>
<?import cn.oyzh.fx.gui.button.ExportButton?>
<?import cn.oyzh.fx.gui.button.NextStepButton?>
<?import cn.oyzh.fx.gui.button.PrevStepButton?>
<?import cn.oyzh.fx.gui.button.StopButton?>
<?import cn.oyzh.fx.gui.label.InfoLabel?>
<?import cn.oyzh.fx.gui.svg.glyph.ExportSVGGlyph?>
<?import cn.oyzh.fx.gui.text.area.MsgTextArea?>
<?import cn.oyzh.fx.gui.text.area.ReadOnlyTextArea?>
<?import cn.oyzh.fx.gui.text.field.ClearableTextField?>
<?import cn.oyzh.fx.plus.controls.box.FXHBox?>
<?import cn.oyzh.fx.plus.controls.box.FXVBox?>
<?import cn.oyzh.fx.plus.controls.button.FXButton?>
<?import cn.oyzh.fx.plus.controls.button.FXCheckBox?>
<?import cn.oyzh.fx.plus.controls.button.FXRadioButton?>
<?import cn.oyzh.fx.plus.controls.text.FXText?>
<?import cn.oyzh.fx.plus.controls.toggle.FXToggleGroup?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<FXVBox xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="cn.oyzh.easyshell.controller.redis.data.ShellRedisExportDataController" realWidth="800" realHeight="600">
    <FXHBox flexWidth="100%" realHeight="80">
        <FXHBox flexHeight="100%" flexWidth="100%">
            <ExportSVGGlyph sizeStr="40,40" color="yellowgreen">
                <HBox.margin>
                    <Insets left="30" top="20"/>
                </HBox.margin>
            </ExportSVGGlyph>
            <FXText enableFont="false" realHeight="25" text="%shell.redis.export.tip1" fontSize="15">
                <HBox.margin>
                    <Insets left="15" top="30"/>
                </HBox.margin>
            </FXText>
        </FXHBox>
    </FXHBox>
    <FXVBox fx:id="step1" flexHeight="100% - 80" flexWidth="100%">
        <FXVBox flexHeight="100% - 60" flexWidth="100%">
            <InfoLabel text="%base.fileFormat">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <fx:define>
                <FXToggleGroup fx:id="format"/>
            </fx:define>
            <FXRadioButton userData="json" toggleGroup="$format" text="%base.jsonType" selected="true">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton userData="xls" toggleGroup="$format" text="%base.xlsType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton userData="xlsx" toggleGroup="$format" text="%base.xlsxType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton userData="xml" toggleGroup="$format" text="%base.xmlType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton userData="csv" toggleGroup="$format" text="%base.csvType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
            <FXRadioButton userData="html" toggleGroup="$format" text="%base.htmlType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </FXRadioButton>
        </FXVBox>
        <FXHBox flexWidth="100%" realHeight="50">
            <NextStepButton onAction="#showStep2" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="10"/>
                </HBox.margin>
            </NextStepButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step2" flexHeight="100% - 80" flexWidth="100%" managedBindVisible="true" visible="false">
        <FXVBox flexHeight="100% - 60" flexWidth="100%">
            <InfoLabel text="%base.database">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <ShellRedisDatabaseComboBox fx:id="db" realHeight="30" flexWidth="100% - 80">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </ShellRedisDatabaseComboBox>
            <InfoLabel text="%base.filter">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <FXHBox realHeight="30">
                <ClearableTextField fx:id="pattern" realHeight="30" flexWidth="100% - 178" text="*">
                    <HBox.margin>
                        <Insets left="30" top="5"/>
                    </HBox.margin>
                </ClearableTextField>
                <FXButton text="%shell.redis.key.tip2" onAction="#showKeys">
                    <HBox.margin>
                        <Insets left="3" top="5"/>
                    </HBox.margin>
                </FXButton>
            </FXHBox>
            <InfoLabel text="%shell.redis.key.tip1">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <ReadOnlyTextArea fx:id="keys" flexHeight="100% - 240" flexWidth="100% - 80">
                <VBox.margin>
                    <Insets left="30" top="5"/>
                </VBox.margin>
            </ReadOnlyTextArea>
        </FXVBox>
        <FXHBox flexWidth="100%" realHeight="50">
            <PrevStepButton onAction="#showStep1" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="10"/>
                </HBox.margin>
            </PrevStepButton>
            <NextStepButton onAction="#showStep3" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="15" top="10"/>
                </HBox.margin>
            </NextStepButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step3" flexHeight="100% - 80" flexWidth="100%" managedBindVisible="true" visible="false">
        <FXVBox flexHeight="100% - 60" flexWidth="100%">
            <InfoLabel text="%base.filePath">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <FXHBox flexWidth="100%">
                <FXButton fx:id="selectFile" onAction="#selectFile" text="%base.select">
                    <HBox.margin>
                        <Insets left="30" top="5"/>
                    </HBox.margin>
                </FXButton>
                <FXText fx:id="fileName">
                    <HBox.margin>
                        <Insets left="10" top="15"/>
                    </HBox.margin>
                </FXText>
            </FXHBox>
            <InfoLabel text="%base.options">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <FXHBox>
                <FXCheckBox fx:id="includeTitle" text="%base.includeTitle" selected="true" disable="true">
                    <HBox.margin>
                        <Insets left="30" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox fx:id="compress" text="%base.compressContent" selected="true">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox fx:id="retainTTL" text="%shell.redis.transport.tip10" selected="true">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <!-- <FXCheckBox fx:id="applyFilter" text="%base.applyFilter"> -->
                <!--     <HBox.margin> -->
                <!--         <Insets left="10" top="5"/> -->
                <!--     </HBox.margin> -->
                <!-- </FXCheckBox> -->
            </FXHBox>
            <InfoLabel text="%base.keyType">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </InfoLabel>
            <FXHBox>
                <FXCheckBox selected="true" fx:id="stringType" text="STRING">
                    <HBox.margin>
                        <Insets left="30" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox selected="true" fx:id="listType" text="LIST">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox selected="true" fx:id="setType" text="SET">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox selected="true" fx:id="zsetType" text="ZSET">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox selected="true" fx:id="hashType" text="HASH">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox selected="true" fx:id="jsonType" text="JSON">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
                <FXCheckBox fx:id="streamType" text="STREAM">
                    <HBox.margin>
                        <Insets left="10" top="5"/>
                    </HBox.margin>
                </FXCheckBox>
            </FXHBox>
        </FXVBox>
        <FXHBox flexWidth="100%" realHeight="50">
            <PrevStepButton onAction="#showStep2"  realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="10"/>
                </HBox.margin>
            </PrevStepButton>
            <NextStepButton onAction="#showStep4" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="15" top="10"/>
                </HBox.margin>
            </NextStepButton>
        </FXHBox>
    </FXVBox>
    <FXVBox fx:id="step4" flexHeight="100% - 80" flexWidth="100%" managedBindVisible="true" visible="false">
        <FXVBox flexWidth="100%" flexHeight="100% - 60">
            <MsgTextArea lineLimit="500" limitPolicy="4" fx:id="exportMsg" flexWidth="100% - 60"
                         flexHeight="100% - 30">
                <VBox.margin>
                    <Insets left="30" top="10"/>
                </VBox.margin>
            </MsgTextArea>
            <InfoLabel fx:id="exportStatus">
                <VBox.margin>
                    <Insets left="30"/>
                </VBox.margin>
            </InfoLabel>
        </FXVBox>
        <FXHBox flexWidth="100%" realHeight="50">
            <PrevStepButton onAction="#showStep3" groupId="exec" realHeight="30" iconSizePercent="0.75">
                <HBox.margin>
                    <Insets left="30" top="10"/>
                </HBox.margin>
            </PrevStepButton>
            <ExportButton tipText="%base.start" groupId="exec" onAction="#doExport" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="10"/>
                </HBox.margin>
            </ExportButton>
            <StopButton fx:id="stopExportBtn" groupId="exec" onAction="#stopExport" realHeight="30">
                <HBox.margin>
                    <Insets left="15" top="10"/>
                </HBox.margin>
            </StopButton>
        </FXHBox>
    </FXVBox>
</FXVBox>
